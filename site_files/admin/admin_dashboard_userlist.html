<!DOCTYPE html>
<html>
<head>
  <title>Admin | User lists</title><link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='styles/admin.css') }}"><meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

{% for message in get_flashed_messages() %}
<div class="alert">
  <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span> 
  {{message|safe}}
</div>

{% endfor %}

<body>

<h2>Users</h2>
<a href="{{url_for('admin')}}">Admin dashboard</a>
<br>
<br>


<!-- Search form -->
<form method="get" action="{{ request.path }}">
      <input type="text" name="search" value="{{ search_query }}" placeholder="Search...">
      <button type="submit">Search</button>
</form>
{% if search_query %}
<h>Results for: {{search_query}}</h>
{% endif %}

<table>
  <tr>
    <th>ID</th>
    <th>Name</th>
    <th>Email</th>
    <th>Date added</th>
    <th>Is Admin</th>
    <th>Delete User</th>
  </tr>
  {% for user in registeredUsers %}
  <tr>
    <th>{{ user.id }}</th>
    <th>{{ user.name }}</th>
    <th>{{ user.email }}</th>
    <th>{{ user.date_added }}</th>
    <th>{{ user.is_admin }}</th>
    <th><a href="{{ url_for('admin_delete_user', user_id=user.id) }}">Delete</a></th>
  </tr>
  {% endfor %}
</table>

<div id="pagination">
  {% if pagination.has_prev %}
      <a href="{{ request.path }}?page={{ pagination.prev_num }}&search={{ search_query }}">Previous</a>
  {% endif %}

  Page {{ pagination.page }} of {{ pagination.pages }}

  {% if pagination.has_next %}
      <a href="{{ request.path }}?page={{ pagination.next_num }}&search={{ search_query }}">Next</a>
  {% endif %}
</div>
</body>
</html>