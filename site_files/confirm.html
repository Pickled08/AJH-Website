<!DOCTYPE html>
<html lang="en">
    {% include "elements/head.html" %}
    <body>
        <!-- Include a hidden CSRF token somewhere -->
        <input type="hidden" id="csrf_token" value="{{ csrf_token() }}">

        <script>
            const userConfirmed = confirm(
                "Are you sure you want to do this? You won't be able to undo this action."
            );

            if (userConfirmed) {
                const form = document.createElement('form');
                form.method = 'POST';
                form.action = '';

                const inputChoice = document.createElement('input');
                inputChoice.type = 'hidden';
                inputChoice.name = 'choice';
                inputChoice.value = 'yes';
                form.appendChild(inputChoice);

                // Add CSRF token
                const csrfInput = document.createElement('input');
                csrfInput.type = 'hidden';
                csrfInput.name = 'csrf_token';
                csrfInput.value = document.getElementById('csrf_token').value;
                form.appendChild(csrfInput);

                document.body.appendChild(form);
                form.submit();
            } else {
                console.log("User canceled.");
            }
        </script>
    </body>
</html>
